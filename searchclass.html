<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>迷你课表</title>

		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/myjs.js" ></script>
		
		<style type="text/css">
			#list {
				/*避免导航边框和列表背景边框重叠，看起来像两条边框似得；*/				
				margin-top: -1px;
			}
			.mui-content {
				min-height: 460px;
			}
		</style>
	</head>

	<body class="searchclass">
		<div class="mui-content">
			<div class="icon">
				<img src="images/80.png" />
			</div>
			<div class="mui-card" style="margin-top: 40px;">
				<ul class="mui-table-view">
					<li class="mui-table-view-cell mui-collapse">
						<a class="mui-navigate-right" href="#">蹭班级的课</a>
						<div class="mui-collapse-content">
					
							<form class="mui-input-group">
								<div class="mui-input-row">
									<label>选择学校</label>
									<select onchange="GetCollegeNameBySchool()" id="school" class="mui-input-clear" style="margin:auto" class="form-control">
										
									</select>
								</div>
								<div class="mui-input-row">
									<label>选择学院</label>
									<select id="major" class="mui-input-clear" style="margin:auto" class="form-control">
									
									</select>
								</div>
								<div class="mui-input-row" style="border-bottom: 0px;">
									<label>输入班级</label>
									<input id="class" type="text" class="mui-input-clear" placeholder="例：1332">
								</div>
								<div  style="text-align: center;">
									<button class="mui-btn mui-btn-primary searchbtn" type="button" onclick="SearchResultLink('byclass')">查询</button>
								</div>
							</form>

						</div>
					</li>
					<li class="mui-table-view-cell mui-collapse">
						<a class="mui-navigate-right" href="#" id="jsName">按课程名或者老师名查询</a>
						<div class="mui-collapse-content">
							<form class="mui-input-group">
								<div class="mui-input-row">
									<label>输入</label>
									<input type="text" id="teachercoursename" class="mui-input-speech mui-input-clear" placeholder="课程名或老师名">
								</div>
								<div style="text-align: center;">
									<button class="mui-btn mui-btn-primary searchbtn" style="width: 30%;" type="button" onclick="SearchResultLink('byteacher')">按老师名查询</button>&nbsp;&nbsp;
									<button class="mui-btn mui-btn-primary searchbtn" style="width: 30%;" type="button" onclick="SearchResultLink('bycourse')">按课程名查询</button>
								</div>
							</form>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<script>
			mui.init({
				swipeBack: true,
				keyEventBind: {
					backbutton: true
				}
			});
			var templates = {};
			var getTemplate = function(name, header, content, loading) {
				var template = templates[name];
				if (!template) {
					//预加载共用父模板；
					var headerWebview = mui.preload({
						url: header,
						id: name + "-main",
						styles: {
							popGesture: "hide",
							zindex: 2
						},
						extras: {
							mType: 'main'
						}
					});
					//预加载共用子webview
					var subWebview = mui.preload({
						url: !content ? "" : content,
						id: name + "-sub",
						styles: {
							top: '48px',
							bottom: '0px',
							zindex: 2
						},
						extras: {
							mType: 'sub'
						}
					});
					subWebview.addEventListener('loaded', function() {
						setTimeout(function() {
							subWebview.show();
						}, 50);
					});
					subWebview.hide();
					headerWebview.append(subWebview);
					//iOS平台支持侧滑关闭，父窗体侧滑隐藏后，同时需要隐藏子窗体；
					if (mui.os.ios) { //5+父窗体隐藏，子窗体还可以看到？不符合逻辑吧？
						headerWebview.addEventListener('hide', function() {
							subWebview.hide("none");
						});
					}
					templates[name] = template = {
						name: name,
						header: headerWebview,
						content: subWebview,
						loaded: loading
					};
				}
				return template;
			};
			mui.plusReady(function() {
				GetSchoolName();
				GetCollegeNameBySchool();
				//关闭splash页面；
				plus.navigator.closeSplashscreen();
			});
			var index = null; //主页面
			function openMenu() {
					!index && (index = mui.currentWebview.parent());
					mui.fire(index, "menu:open");
				}
				//在android4.4.2中的swipe事件，需要preventDefault一下，否则触发不正常
			window.addEventListener('dragright', function(e) {
				e.detail.gesture.preventDefault();
			});
			 //监听右滑事件，若侧滑菜单未显示，右滑要显示菜单；
			window.addEventListener("swiperight", function(e) {
				//默认滑动角度在-45度到45度之间，都会触发右滑菜单，为避免误操作，可自定义限制滑动角度；
				if (Math.abs(e.detail.angle) < 4) {
					openMenu();
				}
			});
		</script>
	</body>

</html>